<ul class="nav nav-pills container">
<li>
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">
    Category
    <b class="caret"></b>
  </a>
  <ul class="dropdown-menu">
  <% @categories.each do |category| %>
    <% if category.parent_id.blank? %>
      <% if category.subcategories.present? %>
        <li class="dropdown-submenu">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
          <%= category.name %>
        </a>
           <%= render partial: "subcategory", locals: {subcategories: category.subcategories} %>
        </li>
      <% else %>
        <li>
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">
          <%= category.name %>
          </a>
        </li>
      <% end %>
    <% end %>
  <% end %>
  </ul>
</li>
</ul>
